<!-- admin/user.ejs -->

<h1>User Management</h1>

<table>
  <tr>
    <th>NO</th>
    <th>Name</th>
    <th>Username</th>
    <th>Level</th>
    <th>Actions</th>
  </tr>
  <% users.forEach((user, index) => { %>
    <tr>
      <td><%= index+1 %></td>
      <td><%= user.name %></td>
      <td><%= user.username %></td>
      <td><%= user.level %></td>
      <td>
        <!-- <button data-toggle="modal" data-target="#editUserModal<%= user._id %>">
          Edit
        </button> -->
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal<%= user._id %>">
          Launch demo modal
        </button>
        <a href="/admin/user/delete/<%= user._id %>" data-method="DELETE" data-confirm="Are you sure you want to delete this user?">Delete</a>
        
      </td>
    </tr>

    <!-- Edit User Modal -->
    <div class="modal fade" id="exampleModal<%= user._id %>" tabindex="-1" aria-labelledby="exampleModal<%= user._id %>Label" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModal<%= user._id %>Label">Modal title</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form action="/admin/user/edit/<%= user._id %>" method="POST">
              <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" id="name" name="name" value="<%= user.name %>" required>
              </div>
              <div class="form-group">
                <label for="username">Username</label>
                <input type="text" class="form-control" id="username" name="username" value="<%= user.username %>" required>
              </div>
              <div class="form-group">
                <label for="level">Level</label>
                <select class="form-control" id="level" name="level" required>
                  <option value="User" <%= user.level === 'User' ? 'selected' : '' %>>User</option>
                  <option value="Admin" <%= user.level === 'Admin' ? 'selected' : '' %>>Admin</option>
                </select>
              </div>
              <button type="submit" class="btn btn-primary">Save Changes</button>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Save changes</button>
          </div>
        </div>
      </div>
    </div>
    <!-- <div class="modal fade" id="editUserModal<%= user._id %>" tabindex="-1" role="dialog" aria-labelledby="editUserModalLabel<%= user._id %>" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="editUserModalLabel<%= user._id %>">Edit User</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form action="/user/edit/<%= user._id %>" method="POST">
              <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" id="name" name="name" value="<%= user.name %>" required>
              </div>
              <div class="form-group">
                <label for="username">Username</label>
                <input type="text" class="form-control" id="username" name="username" value="<%= user.username %>" required>
              </div>
              <div class="form-group">
                <label for="level">Level</label>
                <select class="form-control" id="level" name="level" required>
                  <option value="User" <%= user.level === 'User' ? 'selected' : '' %>>User</option>
                  <option value="Admin" <%= user.level === 'Admin' ? 'selected' : '' %>>Admin</option>
                </select>
              </div>
              <button type="submit" class="btn btn-primary">Save Changes</button>
            </form>
          </div>
        </div>
      </div>
    </div> -->
  <% }) %>
</table>
